<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JS | SummerGua</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" type="image/png" href="https://s3.ax1x.com/2021/01/21/shTlO1.png">
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.1e527139.css" as="style"><link rel="preload" href="/assets/js/app.824bb761.js" as="script"><link rel="preload" href="/assets/js/2.f42e2264.js" as="script"><link rel="preload" href="/assets/js/8.eb057c4d.js" as="script"><link rel="prefetch" href="/assets/js/10.65223740.js"><link rel="prefetch" href="/assets/js/11.9b06b4bb.js"><link rel="prefetch" href="/assets/js/12.ded95f05.js"><link rel="prefetch" href="/assets/js/13.98e4a8fa.js"><link rel="prefetch" href="/assets/js/14.d6ec0ece.js"><link rel="prefetch" href="/assets/js/15.90425df1.js"><link rel="prefetch" href="/assets/js/16.d1120b6a.js"><link rel="prefetch" href="/assets/js/17.304ac912.js"><link rel="prefetch" href="/assets/js/18.205fe488.js"><link rel="prefetch" href="/assets/js/19.d80ed4a7.js"><link rel="prefetch" href="/assets/js/20.a4f55c4a.js"><link rel="prefetch" href="/assets/js/21.61120817.js"><link rel="prefetch" href="/assets/js/22.26f87ee5.js"><link rel="prefetch" href="/assets/js/23.439f51ca.js"><link rel="prefetch" href="/assets/js/3.4e0cecce.js"><link rel="prefetch" href="/assets/js/4.cbb17d95.js"><link rel="prefetch" href="/assets/js/5.76adee42.js"><link rel="prefetch" href="/assets/js/6.95086f74.js"><link rel="prefetch" href="/assets/js/7.1ced6161.js"><link rel="prefetch" href="/assets/js/9.ba7e700a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1e527139.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">SummerGua</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/myinfo/" class="nav-link">
  AboutMe
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/myinfo/" class="nav-link">
  AboutMe
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/interview/" class="sidebar-heading clickable router-link-active open"><span>面经</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/interview/JS/" aria-current="page" class="active sidebar-link">JS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/interview/JS/#数据类型相关" class="sidebar-link">数据类型相关</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/interview/JS/#如何判断一个js变量的类型" class="sidebar-link">如何判断一个js变量的类型</a></li><li class="sidebar-sub-header"><a href="/interview/JS/#null和undefined区别" class="sidebar-link">null和undefined区别</a></li></ul></li><li class="sidebar-sub-header"><a href="/interview/JS/#什么是dom" class="sidebar-link">什么是DOM</a></li><li class="sidebar-sub-header"><a href="/interview/JS/#let、var、const区别" class="sidebar-link">let、var、const区别</a></li><li class="sidebar-sub-header"><a href="/interview/JS/#js闭包概念-应用-防抖-节流" class="sidebar-link">js闭包概念，应用（防抖，节流）</a></li><li class="sidebar-sub-header"><a href="/interview/JS/#垃圾回收" class="sidebar-link">垃圾回收</a></li><li class="sidebar-sub-header"><a href="/interview/JS/#发布订阅模式" class="sidebar-link">发布订阅模式</a></li><li class="sidebar-sub-header"><a href="/interview/JS/#es6合并数组" class="sidebar-link">ES6合并数组</a></li><li class="sidebar-sub-header"><a href="/interview/JS/#深拷贝、浅拷贝" class="sidebar-link">深拷贝、浅拷贝</a></li><li class="sidebar-sub-header"><a href="/interview/JS/#es6新特性" class="sidebar-link">ES6新特性</a></li><li class="sidebar-sub-header"><a href="/interview/JS/#js的事件捕获和事件冒泡-如何阻止" class="sidebar-link">JS的事件捕获和事件冒泡,如何阻止</a></li><li class="sidebar-sub-header"><a href="/interview/JS/#new一个对象发生了什么" class="sidebar-link">new一个对象发生了什么</a></li><li class="sidebar-sub-header"><a href="/interview/JS/#箭头函数和普通函数的区别-this的问题-为什么不能用作构造函数" class="sidebar-link">箭头函数和普通函数的区别，this的问题，为什么不能用作构造函数</a></li><li class="sidebar-sub-header"><a href="/interview/JS/#eventloop-事件循环-机制" class="sidebar-link">EventLoop（事件循环）机制</a></li><li class="sidebar-sub-header"><a href="/interview/JS/#事件委托" class="sidebar-link">事件委托</a></li><li class="sidebar-sub-header"><a href="/interview/JS/#apply、bind、call" class="sidebar-link">apply、bind、call</a></li><li class="sidebar-sub-header"><a href="/interview/JS/#原型和原型链" class="sidebar-link">原型和原型链</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/interview/JS/#原型" class="sidebar-link">原型</a></li><li class="sidebar-sub-header"><a href="/interview/JS/#原型链" class="sidebar-link">原型链</a></li></ul></li><li class="sidebar-sub-header"><a href="/interview/JS/#settimeout准时吗" class="sidebar-link">settimeout准时吗</a></li><li class="sidebar-sub-header"><a href="/interview/JS/#设置精准的计时" class="sidebar-link">设置精准的计时</a></li><li class="sidebar-sub-header"><a href="/interview/JS/#click事件执行顺序" class="sidebar-link">click事件执行顺序</a></li><li class="sidebar-sub-header"><a href="/interview/JS/#实现继承的多种方式" class="sidebar-link">实现继承的多种方式</a></li><li class="sidebar-sub-header"><a href="/interview/JS/#foreach和map" class="sidebar-link">forEach和map</a></li><li class="sidebar-sub-header"><a href="/interview/JS/#宏任务和微任务" class="sidebar-link">宏任务和微任务</a></li><li class="sidebar-sub-header"><a href="/interview/JS/#axios" class="sidebar-link">AXIOS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/interview/JS/#是什么" class="sidebar-link">是什么</a></li><li class="sidebar-sub-header"><a href="/interview/JS/#特点" class="sidebar-link">特点</a></li><li class="sidebar-sub-header"><a href="/interview/JS/#为什么既能在浏览器环境运行又能在服务器-node-环境运行" class="sidebar-link">为什么既能在浏览器环境运行又能在服务器(node)环境运行</a></li><li class="sidebar-sub-header"><a href="/interview/JS/#防xsrf" class="sidebar-link">防xsrf</a></li></ul></li><li class="sidebar-sub-header"><a href="/interview/JS/#promise" class="sidebar-link">Promise</a></li><li class="sidebar-sub-header"><a href="/interview/JS/#async和defer" class="sidebar-link">async和defer</a></li><li class="sidebar-sub-header"><a href="/interview/JS/#instanceof的原理" class="sidebar-link">instanceof的原理</a></li><li class="sidebar-sub-header"><a href="/interview/JS/#typeof能判断哪些" class="sidebar-link">typeof能判断哪些</a></li><li class="sidebar-sub-header"><a href="/interview/JS/#async和await" class="sidebar-link">async和await</a></li><li class="sidebar-sub-header"><a href="/interview/JS/#promise串行、并行" class="sidebar-link">Promise串行、并行</a></li><li class="sidebar-sub-header"><a href="/interview/JS/#实现a-1-a-2" class="sidebar-link">实现a==1&amp;a==2</a></li><li class="sidebar-sub-header"><a href="/interview/JS/#object-create-方法" class="sidebar-link">Object.create()方法</a></li><li class="sidebar-sub-header"><a href="/interview/JS/#和" class="sidebar-link">==和===</a></li><li class="sidebar-sub-header"><a href="/interview/JS/#for-in和for-of" class="sidebar-link">for in和for of</a></li></ul></li><li><a href="/interview/HTML/" class="sidebar-link">html</a></li><li><a href="/interview/explorer/" class="sidebar-link">浏览器</a></li><li><a href="/interview/css/" class="sidebar-link">CSS</a></li><li><a href="/interview/http/" class="sidebar-link">计算机网络</a></li><li><a href="/interview/project/" class="sidebar-link">项目</a></li><li><a href="/interview/suanfa/" class="sidebar-link">算法</a></li><li><a href="/interview/vue/" class="sidebar-link">vue</a></li><li><a href="/interview/write/" class="sidebar-link">手写系列</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/note/" class="sidebar-heading clickable"><span>工作备忘录</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/oneyear/" class="sidebar-heading clickable"><span>年终总结</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="js"><a href="#js" class="header-anchor">#</a> JS</h1> <h2 id="数据类型相关"><a href="#数据类型相关" class="header-anchor">#</a> 数据类型相关</h2> <p>基本数据类型：</p> <ul><li>string</li> <li>number (NaN是number型)</li> <li>undefined</li> <li>null</li> <li>boolean</li></ul> <p>引用数据类型：</p> <ul><li>Object <strong>（在JS中除了基本数据类型以外的都是对象，数据是对象，函数是对象，正则表达式是对象）</strong></li></ul> <p>类型转换：toString(),Number()</p> <h3 id="如何判断一个js变量的类型"><a href="#如何判断一个js变量的类型" class="header-anchor">#</a> 如何判断一个js变量的类型</h3> <ol><li>typeof<div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">-</span> <span class="token keyword">null</span>         <span class="token comment">// object</span>
<span class="token operator">-</span> <span class="token keyword">undefined</span>    <span class="token comment">//undefined</span>
<span class="token operator">-</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>           <span class="token comment">// object</span>
<span class="token operator">-</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>           <span class="token comment">// object</span>
<span class="token operator">-</span> <span class="token number">1</span>            <span class="token comment">// number</span>
<span class="token operator">-</span> <span class="token string">&quot;1&quot;</span>          <span class="token comment">// string</span>
<span class="token operator">-</span> <span class="token boolean">true</span>         <span class="token comment">// boolean</span>
<span class="token operator">-</span> console<span class="token punctuation">.</span>log  <span class="token comment">// function</span>
</code></pre></div></li> <li>Object.prototype.toString.call()<div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">-</span> <span class="token keyword">null</span>        <span class="token comment">// { object Null }</span>
<span class="token operator">-</span> <span class="token keyword">undefined</span>   <span class="token comment">// { object Undefined }</span>
<span class="token operator">-</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>          <span class="token comment">// { object Array }</span>
<span class="token operator">-</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>          <span class="token comment">// { object Object }</span>
<span class="token operator">-</span> <span class="token number">1</span>           <span class="token comment">// { object Number }</span>
<span class="token operator">-</span> <span class="token string">&quot;1&quot;</span>         <span class="token comment">// { object String }</span>
<span class="token operator">-</span> <span class="token boolean">true</span>        <span class="token comment">// { object Boolean }</span>
<span class="token operator">-</span> console<span class="token punctuation">.</span>log <span class="token comment">//{ object Function }</span>
</code></pre></div></li> <li>instanceof
<code>[1] instanceof Array</code></li> <li>判断数组：Array.isArray([])</li></ol> <h3 id="null和undefined区别"><a href="#null和undefined区别" class="header-anchor">#</a> null和undefined区别</h3> <p><a href="http://www.ruanyifeng.com/blog/2014/03/undefined-vs-null.html" target="_blank" rel="noopener noreferrer">来源：阮一峰博客<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>JavaScript的最初版本是这样区分的：null是一个表示&quot;无&quot;的对象，转为数值时为0；undefined是一个表示&quot;无&quot;的原始值，转为数值时为NaN。</p> <p>目前：null表示&quot;没有对象&quot;，即该处不应该有值。</p> <div class="language- extra-class"><pre class="language-text"><code>1. 作为函数的参数，表示该函数的参数不是对象。
2. 作为对象原型链的终点。
</code></pre></div><p>undefined表示&quot;缺少值&quot;，就是此处应该有一个值，但是还没有定义。</p> <div class="language- extra-class"><pre class="language-text"><code>1.变量被声明了，但没有赋值时，就等于undefined。
2. 调用函数时，应该提供的参数没有提供，该参数等于undefined。
3. 对象没有赋值的属性，该属性的值为undefined。
4. 函数没有返回值时，默认返回undefined。
</code></pre></div><h2 id="什么是dom"><a href="#什么是dom" class="header-anchor">#</a> 什么是DOM</h2> <p>文档对象模型，HTML所有元素呈现出层次结构，DOM就是这样的节点树。</p> <h2 id="let、var、const区别"><a href="#let、var、const区别" class="header-anchor">#</a> let、var、const区别</h2> <ol><li>const定义的变量无法修改，且必须初始化（赋值）。</li> <li>let是块级作用域，在函数内部定义后对外部无影响。</li> <li>var定义的变量可以修改，不初始化则输出undefined。</li></ol> <p><strong>变量提升</strong>：函数及变量的声明都将被提升到函数的最顶部</p> <p><strong>临时死区</strong>：</p> <blockquote><p>The variables are created when their containing Lexical Environment is instantiated but may not be accessed inany way until the variable’s LexicalBinding is evaluated.
变量是在实例化其包含的词汇环境时创建的，但在对变量的词汇绑定求值之前，不能以任何方式进行访问。</p></blockquote> <h2 id="js闭包概念-应用-防抖-节流"><a href="#js闭包概念-应用-防抖-节流" class="header-anchor">#</a> js闭包概念，应用（防抖，节流）</h2> <ul><li>this指向：执行的地方找</li> <li>自由变量：在定义的地方找</li></ul> <p>红宝书的解释：有权访问另一个函数作用域中的变量的函数</p> <p>要点</p> <ol><li>函数声明时，会生成一个独立的作用域</li> <li>同一作用域的对象可以互相访问</li> <li>作用域呈层级包含状态，形成作用域链，子作用域的对象可以访问父作用域的对象，反之不能；另外子作用域会使用最近的父作用域的对象</li></ol> <p><strong>特点</strong></p> <ol><li>函数嵌套函数</li> <li>外部函数可以访问内部函数的变量</li> <li>参数和变量不会被垃圾回收  因为作用域链不被释放</li></ol> <p>最简单的闭包：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">fuc1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
   <span class="token keyword">function</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//闭包在此</span>
      <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">return</span> close<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>闭包的应用</strong>
隐藏数据</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">createCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> val</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      data<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> val
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> data<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>防抖一直推迟函数执行（搜索框等待用户输完n秒之后请求）</li> <li>节流为每隔n秒执行一次（搜索框每过n秒执行一次）</li></ul> <p>防抖：对于短时间内连续触发的事件，防抖的含义就是让某个时间期限（如1000毫秒）内，事件处理函数只执行一次。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span>delay</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token comment">//借助闭包</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span> 
        <span class="token punctuation">}</span>
        timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span>delay<span class="token punctuation">)</span> <span class="token comment">// 简化写法</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">showTop</span>  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> scrollTop <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollTop <span class="token operator">||</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span>
　　console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'滚动条位置：'</span> <span class="token operator">+</span> scrollTop<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
window<span class="token punctuation">.</span>onscroll <span class="token operator">=</span> <span class="token function">debounce</span><span class="token punctuation">(</span>showTop<span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>
</code></pre></div><p>节流：如果短时间内大量触发同一事件，那么在函数执行一次之后，该函数在指定的时间期限内不再工作，直至过了这段时间才重新生效。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span>delay</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> valid <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>valid<span class="token punctuation">)</span><span class="token punctuation">{</span>
           <span class="token comment">//休息时间 暂不接客</span>
           <span class="token keyword">return</span> <span class="token boolean">false</span> 
       <span class="token punctuation">}</span>
       <span class="token comment">// 工作时间，执行函数并且在间隔期内把状态位设为无效</span>
        valid <span class="token operator">=</span> <span class="token boolean">false</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            valid <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/* 请注意，节流函数并不止上面这种实现方案,
   例如可以完全不借助setTimeout，可以把状态位换成时间戳，然后利用时间戳差值是否大于指定间隔时间来做判定。
   也可以直接将setTimeout的返回的标记当做判断条件-判断当前定时器是否存在，如果存在表示还在冷却，并且在执行fn之后消除定时器表示激活，原理都一样
    */</span>

<span class="token comment">// 以下照旧</span>
<span class="token keyword">function</span> <span class="token function">showTop</span>  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> scrollTop <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollTop <span class="token operator">||</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span>
　　console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'滚动条位置：'</span> <span class="token operator">+</span> scrollTop<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
window<span class="token punctuation">.</span>onscroll <span class="token operator">=</span> <span class="token function">throttle</span><span class="token punctuation">(</span>showTop<span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span> 
</code></pre></div><h2 id="垃圾回收"><a href="#垃圾回收" class="header-anchor">#</a> 垃圾回收</h2> <p>JavaScript 引擎中有一个后台进程称为<strong>垃圾回收器</strong>，它监视所有对象，并删除那些<strong>不可访问</strong>的对象。</p> <p>当前嵌套调用链上的其他函数的变量和参数、全局变量等不可删除的称为<strong>根</strong>，</p> <p>如果引用或引用链可以从根访问任何其他值，则认为该值是<strong>可访问</strong>的。</p> <ol><li>垃圾回收器获取根并“标记”(记住)它们。</li> <li>然后它访问并“标记”所有来自它们的引用。</li> <li>然后它访问标记的对象并标记它们的引用。所有被访问的对象都被记住，以便以后不再访问同一个对象两次。</li> <li>以此类推，直到有未访问的引用(可以从根访问)为止。</li> <li>除标记的对象外，所有对象都被删除。</li></ol> <h2 id="发布订阅模式"><a href="#发布订阅模式" class="header-anchor">#</a> 发布订阅模式</h2> <p>？</p> <h2 id="es6合并数组"><a href="#es6合并数组" class="header-anchor">#</a> ES6合并数组</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> books <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token string">'3'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> books1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'4'</span><span class="token punctuation">,</span> <span class="token string">'5'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> book2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'6'</span><span class="token punctuation">,</span> <span class="token string">'7'</span><span class="token punctuation">]</span>

<span class="token keyword">let</span> allbooks <span class="token operator">=</span> books1<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>books<span class="token punctuation">,</span> book2<span class="token punctuation">)</span>

<span class="token keyword">let</span> allbooks1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>allbooks<span class="token punctuation">,</span><span class="token operator">...</span>book2<span class="token punctuation">]</span>
</code></pre></div><h2 id="深拷贝、浅拷贝"><a href="#深拷贝、浅拷贝" class="header-anchor">#</a> 深拷贝、浅拷贝</h2> <p><a href="https://www.cnblogs.com/williamjie/p/11192895.html" target="_blank" rel="noopener noreferrer">文章链接<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>实现深拷贝</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">isObject</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'[object Object]'</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">deepCopy</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// 判断如果参数不是一个对象，返回改参数</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isObject</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> source<span class="token punctuation">;</span>
  <span class="token comment">// 判断参数是对象还是数组来初始化返回值</span>
  <span class="token keyword">let</span> res <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// 循环参数对象的key</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> source<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 如果该key属于参数对象本身</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>source<span class="token punctuation">,</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// 如果该key的value值是对象，递归调用深拷贝方法进行拷贝</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isObject</span><span class="token punctuation">(</span>source<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        res<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deepCopy</span><span class="token punctuation">(</span>source<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        <span class="token comment">// 如果该key的value值不是对象，则把参数对象key的value值赋给返回值的key</span>
        res<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> source<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 返回返回值</span>
  <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="es6新特性"><a href="#es6新特性" class="header-anchor">#</a> ES6新特性</h2> <ul><li>let const</li> <li>箭头函数</li> <li>map</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> nie <span class="token operator">=</span> <span class="token punctuation">{</span>name<span class="token operator">:</span><span class="token string">'Annie'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> kth <span class="token operator">=</span> <span class="token punctuation">{</span>name<span class="token operator">:</span><span class="token string">'Keith'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>nie<span class="token punctuation">,</span>kth<span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>kth<span class="token punctuation">,</span>nie<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>nie<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//{name:'Keith'}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>kth<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre></div><ul><li>rest/spread运算符：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token function-variable function">fun</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>list1<span class="token punctuation">,</span> <span class="token operator">...</span>list2<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//合并</span>
</code></pre></div><ul><li>解构：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;Peter&quot;</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">,</span>
    career<span class="token operator">:</span> <span class="token string">&quot;student&quot;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span>name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> career <span class="token punctuation">}</span> <span class="token operator">=</span> person<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello, my name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, and my career is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>career<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Hello, my name is Peter, and my career is student.</span>
</code></pre></div><h2 id="js的事件捕获和事件冒泡-如何阻止"><a href="#js的事件捕获和事件冒泡-如何阻止" class="header-anchor">#</a> JS的事件捕获和事件冒泡,如何阻止</h2> <p><a href="https://segmentfault.com/a/1190000012729080" target="_blank" rel="noopener noreferrer">文章链接<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><strong>事件冒泡</strong></p> <p>IE的事件流叫做事件冒泡。即事件开始时由最具体的元素(文档中嵌套层次最深的那个节点）接收，然后逐级向上传播到window对象</p> <p><strong>事件捕获</strong>
不太具体的节点更早的接收到事件</p> <p><strong>事件流</strong>包括三个阶段：事件捕获阶段、处于目标阶段、事件冒泡阶段</p> <p><strong>阻止</strong>：<code>event.stopPropagation()</code></p><div id="refer-anchor"></div><p></p> <h2 id="new一个对象发生了什么"><a href="#new一个对象发生了什么" class="header-anchor">#</a> new一个对象发生了什么</h2> <p>在 JavaScript 中，使用 <code>new</code> 关键字后，意味着做了如下四件事情：</p> <ol><li><strong>创建一个新的对象</strong>，这个对象的类型是 <code>object</code>；</li> <li><strong>将构造函数的作用域赋给新对象</strong>，设置这个新的对象的内部、可访问性和<code>[[prototype]]</code>属性为构造函数（指<code>prototype.construtor</code>所指向的构造函数）中设置的；</li> <li><strong>执行构造函数中的代码</strong>（为这个对象添加属性），当<code>this</code>关键字被提及的时候，使用新创建的对象的属性； 返回新创建的对象（除非构造方法中返回的是‘无原型’）。</li> <li><strong>返回新对象</strong>,在创建新对象成功之后，如果调用一个新对象没有的属性的时候，<code>JavaScript</code> 会延原型链向止逐层查找对应的内容。这类似于传统的‘类继承’。
代码如下</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">createNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> obj<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">let</span> <span class="token punctuation">[</span>constructor<span class="token punctuation">,</span><span class="token operator">...</span>args<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token operator">...</span>arguments<span class="token punctuation">]</span>
  obj<span class="token punctuation">.</span>__proto__ <span class="token operator">==</span> constructor<span class="token punctuation">.</span>prototype <span class="token comment">//链接到原型</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">constructor</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span>args<span class="token punctuation">)</span> <span class="token comment">//绑定this</span>
  <span class="token keyword">return</span> <span class="token keyword">typeof</span> result <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">?</span> result <span class="token operator">:</span> obj
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
<span class="token punctuation">}</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token function">createNew</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="箭头函数和普通函数的区别-this的问题-为什么不能用作构造函数"><a href="#箭头函数和普通函数的区别-this的问题-为什么不能用作构造函数" class="header-anchor">#</a> 箭头函数和普通函数的区别，this的问题，为什么不能用作构造函数</h2> <p>箭头函数是匿名函数，不能作为构造函数，不能使用new<a href="#refer-anchor"><sup>new发生了什么</sup></a>，如：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token function-variable function">FunConstructor</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'lll'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> 

<span class="token keyword">let</span> fc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FunConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//报错</span>
</code></pre></div><p>this指向执行时的作用域</p> <p>原因：箭头函数没有原型属性，this必须是对象实例，而箭头函数是没有实例的。</p> <p>箭头函数可以让this绑定定义时所在的作用域（上下文），而不是指向运行时所在的作用域。
例如：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Timer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>s1 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>s2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token comment">// 箭头函数</span>
  <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>s1<span class="token operator">++</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 普通函数</span>
  <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>s2<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Timer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'s1: '</span><span class="token punctuation">,</span> timer<span class="token punctuation">.</span>s1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">3100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'s2: '</span><span class="token punctuation">,</span> timer<span class="token punctuation">.</span>s2<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">3100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// s1: 3</span>
<span class="token comment">// s2: 0</span>
</code></pre></div><h2 id="eventloop-事件循环-机制"><a href="#eventloop-事件循环-机制" class="header-anchor">#</a> EventLoop（事件循环）机制</h2> <p><a href="http://www.ruanyifeng.com/blog/2014/10/event-loop.html" target="_blank" rel="noopener noreferrer">参考1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://zhuanlan.zhihu.com/p/33058983" target="_blank" rel="noopener noreferrer">参考2<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ol><li><p>所有同步任务都在主线程上执行，形成一个执行栈（execution context stack）。</p></li> <li><p>主线程之外，还存在一个&quot;任务队列&quot;（task queue）。只要异步任务有了运行结果，就在&quot;任务队列&quot;之中放置一个事件。</p></li> <li><p>一旦&quot;执行栈&quot;中的所有同步任务执行完毕，系统就会读取&quot;任务队列&quot;，看看里面有哪些事件。那些对应的异步任务，于是结束等待状态，进入执行栈，开始执行。</p></li> <li><p>主线程不断重复上面的第三步。</p></li></ol> <h2 id="事件委托"><a href="#事件委托" class="header-anchor">#</a> 事件委托</h2> <p><a href="https://www.cnblogs.com/liugang-vip/p/5616484.html" target="_blank" rel="noopener noreferrer">文章链接<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>事件委托就是利用事件冒泡，只指定一个事件处理程序，就可以管理某一类型的所有事件。</p> <p>原因：100个<code>&lt;/li&gt;</code>占用100个内存空间
使用<code>target</code>确定事件源</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
　<span class="token keyword">var</span> oUl <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;ul1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
　oUl<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
　  <span class="token keyword">var</span> ev <span class="token operator">=</span> ev <span class="token operator">||</span> window<span class="token punctuation">.</span>event<span class="token punctuation">;</span>
　　<span class="token keyword">var</span> target <span class="token operator">=</span> ev<span class="token punctuation">.</span>target <span class="token operator">||</span> ev<span class="token punctuation">.</span>srcElement<span class="token punctuation">;</span>
　　<span class="token keyword">if</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">alert</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span>
　　<span class="token punctuation">}</span>
　<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="apply、bind、call"><a href="#apply、bind、call" class="header-anchor">#</a> apply、bind、call</h2> <ul><li><code>apply()</code>方法调用一个具有给定<code>this</code>值的函数，以及以一个数组（或类数组对象）的形式提供的参数。</li> <li><code>call()</code>方法接受参数列表
用例：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Product</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> price</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Food</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> price</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">Product</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> price<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>category <span class="token operator">=</span> <span class="token string">'food'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Food</span><span class="token punctuation">(</span><span class="token string">'cheese'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// expected output: &quot;cheese&quot;</span>
</code></pre></div><p>用例：合并数组<code>array.push.apply(array1, array2);</code></p> <ul><li><code>bind()</code>方法创建一个新的函数，在 <code>bind()</code>被调用时，这个新函数的<code>this</code>被指定为<code>bind()</code>的第一个参数，而其余参数将作为新函数的参数，供调用时使用。
用例：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> module <span class="token operator">=</span> <span class="token punctuation">{</span>
  x<span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span>
  <span class="token function-variable function">getX</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> unboundGetX <span class="token operator">=</span> module<span class="token punctuation">.</span>getX<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">unboundGetX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// The function gets invoked at the global scope</span>
<span class="token comment">// expected output: undefined</span>

<span class="token keyword">const</span> boundGetX <span class="token operator">=</span> <span class="token function">unboundGetX</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>module<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">boundGetX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// expected output: 42</span>
</code></pre></div><h2 id="原型和原型链"><a href="#原型和原型链" class="header-anchor">#</a> 原型和原型链</h2> <p><a href="https://www.zhihu.com/question/347766140/answer/845843566" target="_blank" rel="noopener noreferrer">文章链接<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="原型"><a href="#原型" class="header-anchor">#</a> 原型</h3> <ol><li>每个对象都有一个<code>__proto__</code>属性，指向其<code>prototype</code>原型对象
<strong>原型对象的好处</strong>：让所有实例对象共享它所包含的属性和方法</li> <li>每个构造函数都有一个<code>prototype</code>原型对象，该原型对象的constructor指向构造函数本身</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
<span class="token punctuation">}</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Person <span class="token comment">//对应2</span>
Person<span class="token punctuation">.</span>__proto__  <span class="token operator">===</span> <span class="token class-name">Function</span><span class="token punctuation">.</span>prototype
<span class="token keyword">var</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span>
p1<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype <span class="token comment">//对应1</span>
p1<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> p2<span class="token punctuation">.</span>__proto__
</code></pre></div><h3 id="原型链"><a href="#原型链" class="header-anchor">#</a> 原型链</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span>
arr<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype
arr<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token comment">//原型链的终点</span>
</code></pre></div><h2 id="settimeout准时吗"><a href="#settimeout准时吗" class="header-anchor">#</a> settimeout准时吗</h2> <p>到时间将异步任务添加到执行队列里面去，不代表到了那个时间就执行异步任务</p> <h2 id="设置精准的计时"><a href="#设置精准的计时" class="header-anchor">#</a> 设置精准的计时</h2> <p><a href="https://juejin.cn/post/6844903749442355208" target="_blank" rel="noopener noreferrer">requestAnimationFrame<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
由系统来决定回调函数的执行时机。具体一点讲，如果屏幕刷新率是60Hz,那么回调函数就每16.7ms被执行一次，如果刷新率是75Hz，那么这个时间间隔就变成了1000/75=13.3ms，换句话说就是，requestAnimationFrame的步伐跟着系统的刷新步伐走。它能保证回调函数在屏幕每一次的刷新间隔中只被执行一次，这样就不会引起丢帧现象，也不会导致动画出现卡顿的问题</p> <h2 id="click事件执行顺序"><a href="#click事件执行顺序" class="header-anchor">#</a> click事件执行顺序</h2> <p>1.<code>onclick</code> 2.<code>addEventListener(&quot;click&quot;,func())</code>, 3.<code>href=&quot;javascript:alert('something');&quot;</code></p> <h2 id="实现继承的多种方式"><a href="#实现继承的多种方式" class="header-anchor">#</a> 实现继承的多种方式</h2> <p><a href="https://www.cnblogs.com/wjgoblin/p/10949939.html" target="_blank" rel="noopener noreferrer">继承<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="foreach和map"><a href="#foreach和map" class="header-anchor">#</a> forEach和map</h2> <ol><li>forEach()返回值是undefined，不可以链式调用。</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> value <span class="token operator">*</span> value<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li>map()返回一个新数组，原数组不会改变。</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> list <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> value <span class="token operator">*</span> value<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="宏任务和微任务"><a href="#宏任务和微任务" class="header-anchor">#</a> 宏任务和微任务</h2> <p>js 是单线程执行的，js中的任务按顺序一个一个的执行，但是一个任务耗时太长；
那么后面的任务就需要等待，为了解决这种情况，将任务分为了同步任务和异步任务；
而异步任务又可以分为微任务和宏任务。</p> <p><a href="https://blog.csdn.net/qq_30376375/article/details/82990588" target="_blank" rel="noopener noreferrer">链接<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ol><li><p>宏任务：包括整体代码script，setTimeout，setInterval、I/O、UI 交互事件、setImmediate(Node.js 环境)；</p></li> <li><p>微任务：Promise.then、MutaionObserver、process.nextTick(Node.js 环境)</p></li></ol> <p>任务进入执行栈----同步任务还是异步任务----同步的进入主线程，异步的进入Event Table并注册函数。</p> <p>当指定的事情完成时，Event Table会将这个函数移入Event Queue。主线程内的任务执行完毕为空，会去Event Queue读取对应的函数，进入主线程执行。</p> <p>上述过程会不断重复，也就是常说的Event Loop(事件循环)。</p> <p>JS是单线程</p> <ol><li>非阻塞性的任务采取同步的方式，直接在主线程的执行栈完成</li> <li>阻塞性的任务都会采用异步来执行，异步的工作一般会交给其他线程完成，然会回调函数会放到事件队列中
执行一个宏任务-&gt;执行所有微任务-&gt;UI render</li></ol> <p>可以把 await 看成是让出线程的标志</p> <h2 id="axios"><a href="#axios" class="header-anchor">#</a> AXIOS</h2> <h3 id="是什么"><a href="#是什么" class="header-anchor">#</a> 是什么</h3> <p>Axios 是一个基于 promise 的 HTTP 库，可以用在浏览器和 node.js 中。前端最流行的 ajax 请求库，
react/vue 官方都推荐使用 axios 发 ajax 请求</p> <h3 id="特点"><a href="#特点" class="header-anchor">#</a> 特点</h3> <ol><li>Axios 是一个基于 promise 的 HTTP 库，支持promise所有的API</li> <li>它可以拦截请求和响应</li> <li>它可以转换请求数据和响应数据，并对响应回来的内容自动转换成 JSON类型的数据</li> <li>安全性更高，客户端支持防御 XSRF</li></ol> <h3 id="为什么既能在浏览器环境运行又能在服务器-node-环境运行"><a href="#为什么既能在浏览器环境运行又能在服务器-node-环境运行" class="header-anchor">#</a> 为什么既能在浏览器环境运行又能在服务器(node)环境运行</h3> <p>axios在浏览器端使用<code>XMLHttpRequest</code>对象发送<code>ajax</code>请求；在node环境使用<code>http</code>对象发送<code>ajax</code>请求</p> <p>通过判断<code>XMLHttpRequest</code>和<code>process</code>这两个全局变量来判断程序的运行环境的，从而在不同的环境提供不同的http请求模块，实现客户端和服务端程序的兼容。</p> <h3 id="防xsrf"><a href="#防xsrf" class="header-anchor">#</a> 防xsrf</h3> <p>axios会检查是否是标准的浏览器环境，然后在标准的浏览器环境中判断，如果设置了跨域请求时需要凭证且请求的域名和页面的域名相同时，读取cookie中xsrf token 的值，并设置到承载 xsrf token 的值的 HTTP 头中</p> <h2 id="promise"><a href="#promise" class="header-anchor">#</a> Promise</h2> <p><a href="https://www.runoob.com/w3cnote/javascript-promise-object.html" target="_blank" rel="noopener noreferrer">Promise对象文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>三个状态：pending fufilled rejected</p> <p>Promise的实现</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Promise</span> <span class="token punctuation">{</span>
  callbacks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">fn</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_resolve</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">onFulfilled</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>callbacks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>onFulfilled<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">_resolve</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>callbacks<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">fn</span> <span class="token operator">=&gt;</span> <span class="token function">fn</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//Promise应用</span>
<span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'done'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'5秒'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">tip</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>tip<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>假设有一个回调地狱</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">function</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'fn1'</span><span class="token punctuation">)</span>
      <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'fn2'</span><span class="token punctuation">)</span>
      <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">fn3</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'fn3'</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">fn1</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token function">fn3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><p>分别在每一秒后执行fn1、fn2、fn3</p> <p>使用<code>Promise</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
         console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'fn1...'</span><span class="token punctuation">)</span>
         <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
         console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'fn2...'</span><span class="token punctuation">)</span>
         <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">fn3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
         console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'fn3'</span><span class="token punctuation">)</span>
         <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">onerror</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>fn2<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>fn3<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>onerror<span class="token punctuation">)</span>
</code></pre></div><h2 id="async和defer"><a href="#async和defer" class="header-anchor">#</a> <code>async</code>和<code>defer</code></h2> <p>直接使用script脚本的话，html会按照顺序来加载并执行脚本，在脚本加载和执行的过程中，会阻塞后续的DOM渲染。</p> <p>这两个属性使得script都不会阻塞DOM的渲染</p> <p><strong>区别</strong></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">async</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>script.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>有 async，加载和渲染后续文档元素的过程将和 script.js 的<strong>加载与执行</strong>并行进行（异步）。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">defer</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myscript.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>有 defer，加载后续文档元素的过程将和 script.js 的加载并行进行（异步），但是 <strong>script.js 的执行要在所有元素解析完成之后</strong>，DOMContentLoaded 事件触发之前完成。</p> <p><strong>注意</strong> 操作DOM的脚本不要用这两个属性</p> <p><strong>图解如下</strong> <img src="/assets/img/defer.244a0c32.jpg" alt="defer"></p> <h2 id="instanceof的原理"><a href="#instanceof的原理" class="header-anchor">#</a> instanceof的原理</h2> <p>instanceof 主要的实现原理就是只要右边变量的 prototype 在左边变量的原型链上即可。因此，instanceof 在查找的过程中会遍历左边变量的原型链，直到找到右边变量的 prototype，如果查找失败，则会返回 false，告诉我们左边变量并非是右边变量的实例。</p> <h2 id="typeof能判断哪些"><a href="#typeof能判断哪些" class="header-anchor">#</a> typeof能判断哪些</h2> <ol><li>number</li> <li>boolean</li> <li>function</li> <li>object</li> <li>string</li> <li>symbol</li></ol> <h2 id="async和await"><a href="#async和await" class="header-anchor">#</a> async和await</h2> <p><a href="https://www.cnblogs.com/liquanjiang/p/11409792.html" target="_blank" rel="noopener noreferrer">链接<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <strong>async</strong></p> <ul><li>async 用来声明一个函数是异步的。</li> <li>await等待一个异步方法执行完成。</li></ul> <p>返回的是一个 Promise 对象，所以在最外层不能用 await 获取其返回值的情况下，我们当然应该用原来的方式：<code>then()</code> 链来处理这个 Promise 对象</p> <p><strong>await</strong></p> <p>如果它等到的不是一个 Promise 对象，那 await 表达式的运算结果就是它等到的东西。</p> <p>如果它等到的是一个 Promise 对象，await 就忙起来了，它会阻塞后面的代码，等着 Promise 对象 resolve，然后得到 resolve 的值，作为 await 表达式的运算结果。</p> <h2 id="promise串行、并行"><a href="#promise串行、并行" class="header-anchor">#</a> Promise串行、并行</h2> <p><code>Promise.all()</code>方法是并行处理</p> <p>async await串行</p> <h2 id="实现a-1-a-2"><a href="#实现a-1-a-2" class="header-anchor">#</a> 实现<code>a==1&amp;a==2</code></h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span>  _a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
	<span class="token function-variable function">get</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> _a<span class="token operator">++</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token operator">===</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> a<span class="token operator">===</span><span class="token number">2</span> <span class="token operator">&amp;&amp;</span> a<span class="token operator">===</span><span class="token number">3</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="object-create-方法"><a href="#object-create-方法" class="header-anchor">#</a> <code>Object.create()</code>方法</h2> <p>创建一个新对象，使用现有的对象来提供新创建的对象的__proto__</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  isHuman<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token function-variable function">printIntroduction</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">My name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">. Am I human? </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>isHuman<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> me <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>

me<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Matthew'</span><span class="token punctuation">;</span> 
<span class="token comment">// &quot;name&quot; is a property set on &quot;me&quot;, but not on &quot;person&quot;</span>
me<span class="token punctuation">.</span>isHuman <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> 
<span class="token comment">// inherited properties can be overwritten</span>

me<span class="token punctuation">.</span><span class="token function">printIntroduction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// expected output: &quot;My name is Matthew. Am I human? true&quot;</span>
</code></pre></div><h2 id="和"><a href="#和" class="header-anchor">#</a> <code>==</code>和<code>===</code></h2> <p>除了<code>==null</code>外，其他都用<code>===</code></p> <h2 id="for-in和for-of"><a href="#for-in和for-of" class="header-anchor">#</a> <code>for in</code>和<code>for of</code></h2> <p>用法：<code>for(let x in y)</code>
区别：</p> <ol><li>in返回下标 用于数组、对象、字符串</li> <li>of返回值 不能用于对象</li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/interview/HTML/">
        html
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.824bb761.js" defer></script><script src="/assets/js/2.f42e2264.js" defer></script><script src="/assets/js/8.eb057c4d.js" defer></script>
  </body>
</html>
